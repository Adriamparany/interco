{# we print show.html.twig through AJAX #}
{% extends 'base.html.twig' %}

{% block body %}
    {% if app.user %}
        <div class="mb-3" id="logged">
            Vous êtes connecté en tant que {{ app.user.username }}, <a href="{{ path('app_logout') }}">Se deconnecter</a>
        </div> 

        <div id="content"><div>
        {% else %}
            Vous n'êtes pas autorisé à voire le contenu
    {% endif %}
    
     
{% endblock %}


{% block javascripts %} 
    {{ parent() }}
    <script>
    window.onload = function() {
        $.ajax({
            async: true,
            url: '/res',
            method: 'POST',
            contentType: "application/json; charset=utf-8",
            //contentType: "html",
            beforeSend: function () {

            },
            success: function(response) {
            //console.log(response)
            //$('#logged').append(response);
            //$('#content').load("res")
            //$('#content').load("resapidiv")
            //var content = $('<div>').load("resapidiv")
            //console.log(content)
            //location.reload(true);
            var content = $('<div>').append(response).find('div#content');
            $('#logged').append(content)
          
            $('#legende').append($('#legende2').html())
            $('#legende2').remove()

            },
        });
         
    } 
    </script>
{% endblock %}



